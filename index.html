<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Art Gallery</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap" rel="stylesheet">
  <!-- Plyr CSS -->
  <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
  
  <style>
    :root {
      --plyr-color-main: #02062e;
    }
    
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
    }

    /* Audio player styling */
    .plyr {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 300px;
      background: rgba(0, 0, 0, 0.7);
      border-radius: 8px;
      color: white;
    }

    .plyr--audio .plyr__controls {
      background: transparent;
    }

    /* Custom Plyr colors */
    .plyr--audio .plyr__progress__buffer,
    .plyr--audio .plyr__volume--display {
      background: #02062e;
    }
    
    .plyr--audio .plyr__progress--played,
    .plyr--audio .plyr__volume--value {
      background: #02062e;
    }
    
    .plyr--audio .plyr__control:hover,
    .plyr--audio .plyr__control[aria-expanded="true"] {
      background: #02062e;
    }
    
    .gallery {
      display: flex;
      height: 100vh;
      width: 300vw;
      transition: transform 0.5s ease-in-out;
    }
    
    .slide {
      width: 100vw;
      height: 100vh;
      background-size: cover;
      background-position: center;
    }
    
    #slide1 {
      background-image: url('https://i.postimg.cc/wjpNzzLf/DP119115.jpg');
    }
    
    #slide2 {
      background-image: url('https://i.postimg.cc/kgq2ZcPL/Pieter-Bruegel-the-Elder-The-Peasant-Dance-WGA3499.jpg');
    }
    
    #slide3 {
      background-image: url('https://i.postimg.cc/Sj0yWykw/a-scene-on-the-ice-1967-3-1.jpg');
    }
    
    .slide {
      animation: zoomAndPan 60s linear infinite;
      background-size: 110%; /* Slightly zoomed in */
    }

    @keyframes zoomAndPan {
      0% {
        background-position: 0% 0%;
      }
      25% {
        background-position: 100% 0%;
      }
      50% {
        background-position: 100% 100%;
      }
      75% {
        background-position: 0% 100%;
      }
      100% {
        background-position: 0% 0%;
      }
    }

    .nav-button {
      position: fixed;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0, 0, 0, 0.5);
      color: white;
      border: none;
      padding: 15px;
      cursor: pointer;
      font-size: 24px;
      font-family: 'Montserrat', sans-serif;
      font-weight: 600;
      opacity: 0;
      animation: fadeIn 0.5s ease-out 1s forwards;
      transition: background 0.3s, transform 0.2s ease-out;
    }

    .nav-button:hover {
      background: rgba(0, 0, 0, 0.7);
      transform: translateY(-50%) scale(1.1);
    }

    .nav-button:active {
      transform: translateY(-50%) scale(0.95);
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
      }
    }
    
    #prev {
      left: 20px;
    }
    
    #next {
      right: 20px;
    }
  </style>
</head>
<body>
  <div class="gallery">
    <div class="slide" id="slide1"></div>
    <div class="slide" id="slide2"></div>
    <div class="slide" id="slide3"></div>
  </div>
  
  <div class="side-buttons">
    <button class="menu-button" id="about-btn">ABOUT</button>
    <button class="menu-button" id="work-btn">WORK</button>
    <button class="menu-button" id="contact-btn">CONTACT</button>
  </div>

  <button class="nav-button" id="prev">‹</button>
  <button class="nav-button" id="next">›</button>

  <div class="bottom-sheet" id="about-sheet">
    <div class="sheet-content">
      <h2>About Louis Papa-Louis</h2>
      <p>Louis Papa-Louis is a composer based in London, crafting evocative contemporary classical music that bridges the gap between tradition and innovation. With a unique ability to weave intricate melodies and textures, his compositions resonate with emotional depth and modern sensibilities. Drawing inspiration from the vibrant cultural tapestry of London, Louis's work invites listeners into a world where the past and present harmonize in unexpected ways.</p>
      <button class="close-btn">×</button>
    </div>
  </div>

  <div class="bottom-sheet" id="work-sheet">
    <div class="sheet-content">
      <h2>Selected Works</h2>
      <p id="track-title"></p>
      <ul>
      </ul>
      <button class="close-btn">×</button>
    </div>
  </div>

  <div class="bottom-sheet" id="contact-sheet">
    <div class="sheet-content">
      <h2>Contact</h2>
      <form>
        <input type="text" placeholder="Your Name" required>
        <input type="email" placeholder="Your Email" required>
        <textarea placeholder="Your Message" rows="4" required></textarea>
        <button type="submit">Send</button>
      </form>
      <button class="close-btn">×</button>
    </div>
  </div>

  <!-- Plyr JS -->
  <script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
  
  <!-- Audio Player -->
  <audio id="player" controls></audio>

  <script>
    const gallery = document.querySelector('.gallery');
    const prevButton = document.getElementById('prev');
    const nextButton = document.getElementById('next');
    const player = new Plyr('#player', {
      controls: ['play', 'previous', 'next', 'progress', 'current-time', 'mute', 'volume'],
      hideControls: false
    });
    let currentIndex = 0;

    // Audio tracks for each slide
    const slideTracks = [
      // Tracks for Corot painting
      [
        "https://princip.github.io/mp3/Website_Solar_Eclipse_no8.mp3",
        "https://princip.github.io/mp3/Website_Attird_with_Stars.mp3"
      ],
      // Tracks for Rousseau painting
      [
        "https://princip.github.io/mp3/Website_Oh_Tilda.mp3",
        "https://princip.github.io/mp3/Website_Solar_Eclipse_no8.mp3"
      ],
      // Tracks for Clodt painting
      [
        "https://princip.github.io/mp3/Website_Attird_with_Stars.mp3",
        "https://princip.github.io/mp3/Website_Oh_Tilda.mp3"
      ]
    ];

    let currentTrackIndex = 0;
    let currentSlideIndex = 0;

    // Initialize first track
    function loadTrack(slideIndex, trackIndex) {
      player.source = {
        type: 'audio',
        sources: [{
          src: slideTracks[slideIndex][trackIndex],
          type: 'audio/mp3'
        }]
      };
      player.play();

      // Get filename from URL
      const url = slideTracks[slideIndex][trackIndex];
      const filename = url.substring(url.lastIndexOf('/') + 1);

      // Format the title
      let title = filename.replace("Website_", "").replace(/_/g, " ").replace(".mp3", "");

      // Display the title in work sheet
      document.getElementById('track-title').textContent = title;
    }

    // Handle next track
    player.on('next', () => {
      currentTrackIndex = (currentTrackIndex + 1) % slideTracks[currentSlideIndex].length;
      loadTrack(currentSlideIndex, currentTrackIndex);
    });

    // Handle previous track
    player.on('previous', () => {
      currentTrackIndex = (currentTrackIndex - 1 + slideTracks[currentSlideIndex].length) % slideTracks[currentSlideIndex].length;
      loadTrack(currentSlideIndex, currentTrackIndex);
    });

    // Initialize first track
    loadTrack(0, 0);

    // Change track when slide changes
    function changeTrack(slideIndex) {
      currentSlideIndex = slideIndex;
      currentTrackIndex = 0; // Always start with first track for the slide
      loadTrack(currentSlideIndex, currentTrackIndex);
    }

    function showSlide(index) {
      const offset = -index * 100;
      gallery.style.transform = `translateX(${offset}vw)`;
    }

    let direction = 1; // 1 for forward, -1 for backward

    prevButton.addEventListener('click', () => {
      direction = -1;
      currentIndex = (currentIndex - 1 + 3) % 3;
      showSlide(currentIndex);
      changeTrack(currentIndex);
    });

    nextButton.addEventListener('click', () => {
      direction = 1;
      currentIndex = (currentIndex + 1) % 3;
      showSlide(currentIndex);
      changeTrack(currentIndex);
    });

    // Initialize first track
    changeTrack(0);

    function showSlide(index) {
      // Calculate offset based on direction
      let offset = -index * 100;
      
      // If we're at the end and going forward, add an extra slide width
      if (direction === 1 && index === 0) {
        offset = -300; // Move to clone of first slide
      }
      // If we're at the start and going backward, subtract an extra slide width
      else if (direction === -1 && index === 2) {
        offset = 100; // Move to clone of last slide
      }
      
      gallery.style.transform = `translateX(${offset}vw)`;
      
      // After transition completes, instantly jump to the real slide
      setTimeout(() => {
        if (direction === 1 && index === 0) {
          gallery.style.transition = 'none';
          gallery.style.transform = `translateX(0vw)`;
          setTimeout(() => {
            gallery.style.transition = 'transform 0.5s ease-in-out';
          }, 50);
        }
        else if (direction === -1 && index === 2) {
          gallery.style.transition = 'none';
          gallery.style.transform = `translateX(-200vw)`;
          setTimeout(() => {
            gallery.style.transition = 'transform 0.5s ease-in-out';
          }, 50);
        }
      }, 500);
    }

    // Bottom sheet functionality
    const sheets = {
      about: document.getElementById('about-sheet'),
      work: document.getElementById('work-sheet'),
      contact: document.getElementById('contact-sheet')
    };

    document.getElementById('about-btn').addEventListener('click', () => toggleSheet('about'));
    document.getElementById('work-btn').addEventListener('click', () => toggleSheet('work'));
    document.getElementById('contact-btn').addEventListener('click', () => toggleSheet('contact'));

    document.querySelectorAll('.close-btn').forEach(btn => {
      btn.addEventListener('click', closeAllSheets);
    });

    function toggleSheet(sheet) {
      if (sheets[sheet].classList.contains('visible')) {
        sheets[sheet].classList.remove('visible'); // Close if already visible
      } else {
        closeAllSheets(); // Close any other open sheets
        sheets[sheet].classList.add('visible'); // Open the clicked sheet
      }
    }

    function closeAllSheets() {
      Object.values(sheets).forEach(sheet => sheet.classList.remove('visible'));
    }
  </script>

  <style>
    .side-buttons {
      position: fixed;
      left: 20px;
      top: 15%;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .menu-button {
      background: rgba(0, 0, 0, 0.7);
      color: white;
      border: none;
      padding: 15px 25px;
      cursor: pointer;
      font-size: 16px;
      font-family: 'Montserrat', sans-serif;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      border-radius: 4px;
      transition: background 0.3s, transform 0.2s ease-out, box-shadow 0.2s ease-out;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      will-change: box-shadow;
      opacity: 0;
      transform: translateX(-20px);
      animation: slideIn 0.5s ease-out forwards;
    }

    @keyframes slideIn {
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .menu-button:nth-child(1) {
      animation-delay: 0.2s;
    }
    .menu-button:nth-child(2) {
      animation-delay: 0.4s;
    }
    .menu-button:nth-child(3) {
      animation-delay: 0.6s;
    }

    .menu-button:hover {
      background: rgba(0, 0, 0, 0.54);
      transform: scale(1.05);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }
    
    .menu-button:active {
      transform: scale(0.98);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }
    
    .menu-button:focus {
      outline: 2px solid rgba(255, 255, 255, 0.5);
      outline-offset: 2px;
      transition: outline-color 0.2s ease-out;
    }

    .menu-button {
      transition: background 0.3s, transform 0.2s ease-out;
    }

    .bottom-sheet {
      position: fixed;
      bottom: -100%;
      left: 0;
      right: 0;
      background: rgba(0, 0, 0, 0.54);
      color: white;
      padding: 30px;
      transition: bottom 0.4s ease-in-out;
      z-index: 1000;
    }

    .bottom-sheet.visible {
      bottom: 0;
    }

    .sheet-content {
      max-width: 800px;
      margin: 0 auto;
      position: relative;
    }

    .close-btn {
      position: absolute;
      right: 0;
      top: 0;
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
      padding: 10px;
      font-family: 'Montserrat', sans-serif;
      font-weight: 600;
    }

    .sheet-content h2 {
      margin-bottom: 20px;
      font-family: 'Montserrat', sans-serif;
      font-weight: 600;
    }

    .sheet-content p {
      line-height: 1.6;
      font-family: 'Montserrat', sans-serif;
      font-weight: 600;
    }

    .sheet-content ul {
      list-style: none;
      padding: 0;
    }

    .sheet-content li {
      margin: 10px 0;
      font-family: 'Montserrat', sans-serif;
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    .sheet-content form {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .sheet-content input,
    .sheet-content textarea {
      padding: 10px;
      border: 1px solid #444;
      background: #222;
      color: white;
      border-radius: 4px;
      font-family: 'Montserrat', sans-serif;
      font-weight: 600;
      letter-spacing: 0.5px;
    }

    .sheet-content button[type="submit"] {
      background: #555;
      color: white;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
      border-radius: 4px;
      font-family: 'Montserrat', sans-serif;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      transition: background 0.3s;
    }

    .sheet-content button[type="submit"]:hover {
      background: #666;
    }
  </style>
</body>
</html>
